<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Authenticate/register.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Authenticate/register.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { displayError } from '../error/error.mjs';

const url = `https://nf-api.onrender.com/api/v1/social/auth/register`;
const registerUser = document.querySelector("#registerUser");

registerUser.onclick = async function () {
    try {
        const username = document.getElementById("loginForm")[0].value;
        const email = document.getElementById("loginForm")[1].value;
        const password = document.getElementById("loginForm")[2].value;
        const html = document.querySelector("#registerLogin-error")
        /**
         * Check is the username is longer than 3 characters
         * @param {String} username
         * @return {Boolean}
         * **/
        if (username.length &lt; 4) {
            html.innerHTML = ` &lt;div class="alert alert-danger">
            Error, Username is invalid, username must be longer then 3 characters!
            &lt;/div>
            `;
            return
        }

        /**
         * Check if the email contains an @ and a valid email domain
         * valid email domain is noroff.no or stud.noroff.no
         * @param {String} email
         * @return {Boolean}
         **/

        if (checkEmail(email.length, 0) === false) {
            html.innerHTML = ` &lt;div class="alert alert-danger">
            Error! Email Adress is invalid or missing!
            &lt;br>
            Email Address must be: 
            &lt;br>
            &lt;b>user@noroff.no&lt;/b> or &lt;b>user@stud.noroff.no&lt;/b>
            &lt;/div>
            `;
            return
        }

        function checkEmail(email) {
            const regEx = /\S+@\S+\.\S+\*@(noroff|stud.noroff).no$/;
            const match = regEx.test(email);
            return match;
        }

        /**
         * Check if password is 8 characters or longer
         * @param {String} password
         * @return {Boolean}
         **/

        if (password.length &lt; 8) {
            html.innerHTML = ` &lt;div class="alert alert-danger">
            Error, Password is required and must be atleast 8 characters long!
            &lt;/div>
            `;
            return
        }

        /**
         * Format data to JSON, and fetch the url, after fetched check status. 
         * If correct status set localstorage, and return url data.
         * @param {String} url
         * @param {Object} options
         * @return {Object}
         */

        const options = {
            method: 'POST',
            headers: {
                'Content-type': 'application/json',
            },
            body: JSON.stringify({
                username: username,
                email: email,
                password: password,
            }),
        }
        console.log(options);
        const response = await fetch(url, options);
        const data = await response.json();
        if (!response.ok) {
            localStorage.setItem("access-token", data.accessToken);
            html.innerHTML = `
            &lt;div class="alert alert-success">
                Account Registerd! You can now login with your Email and Password!
            &lt;/div>
            `;
        } else {
            html.innerHTML = `
            &lt;div class="alert alert-danger">
                Provided information is incorrect, Please try again!
            &lt;/div>
            `;
        }
    } catch(error) {
        console.log(error);
        htmlLoggedIn.innerHTML = displayError('Error', error);
    }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#autoLogin">autoLogin</a></li><li><a href="global.html#displayPosts">displayPosts</a></li><li><a href="global.html#filterByComments">filterByComments</a></li><li><a href="global.html#isLoggedIn">isLoggedIn</a></li><li><a href="global.html#viewPost">viewPost</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Fri Oct 14 2022 12:58:45 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
